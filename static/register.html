<!DOCTYPE html>
<html>
<head>
    <title>用户注册</title>
    <meta charset="utf-8">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="/static/js/jquery-2.1.1.min.js" type="text/javascript"></script>
    <script src="/static/js/bootstrap.min.js" type="text/javascript"></script>
    <style type="text/css">
        .panel-body{
            padding: 30px 50px 0 50px;
        }
        .form-group{
            margin-bottom: 35px;
        }
        .panel-title{
            font-size: 24px;
            font-weight: bold;
        }
    </style>
    <script type="text/javascript">
        function register(){
            var data={
                "username": $("#username").val(),
                "phone": $("#phone").val(),
                "password": $("#password").val(),
                "confirm": $("#confirm").val(),
            };
            if (data.confirm !== data.password) {
                alert("Password not confirmed");
                return
            }
            data=JSON.stringify(data);
            $.ajax({
                url:'/register',
                type:'POST',
                data:data,
                // dataType: "json", 如果指定了dataType为json返回的时候数据一定要是json格式的否则会一直执行error event
                contentType:"application/json;charset=utf-8",
                success:function(data,status){
                    if(status === 'success'){
                        location.href='/login';
                    }
                },
                error:function(data,err){
                    alert("error input");
                    location.href='/register';
                }
            });
        }
    </script>
</head>
<body>
<div class="container web-body" style="margin-top:100px;width: 980px;">
    <%- message %>
    <div class="row">
        <div class="col-lg-6 col-lg-offset-3">
            <div class="panel panel-default">
                <div class="panel-heading" style="height: 50px;">
                    <div class="panel-title" style="text-align: left">用户注册</div>
                </div>
                <div class="panel-body">
                    <form action="#" class="form-horizontal" role="form" method="post" >
                        <div class="form-group">
                            <input id="username" type="text" class="form-control" name="username" placeholder="用户名" />
                        </div>
                        <div class="form-group">
                            <input id="phone" type="tel" class="form-control" name="phone" placeholder="手机号" />
                        </div>
                        <div class="form-group">
                            <input id="password" type="password" class="form-control" name="password"  placeholder="密码" />
                        </div>
                        <div class="form-group">
                            <input id="confirm" type="password" class="form-control" name="confirm" placeholder="确认密码" />
                        </div>
                        <div class="form-group">
                            <input type="button" class="btn btn-success btn-block" onclick="register()" value="注 册" />
                            <a href="index" class="btn btn-primary" style="float: left;margin-top: 20px;">首 页</a>
                            <a href="login" class="btn btn-primary" style="float: right;margin-top: 20px;">登 陆</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>


